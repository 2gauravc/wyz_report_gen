defaults:
  group_cols: [grade, gender]
  percentile: 80

levels:

  level0:
    # Level 0 = raw observations -> group stats + score columns
    metrics:
      - key: chairsquat
        label: Maximum Chair Squats
        value_col: chairsquat
        aggregates: [avg, p80, best]
        scoring:
          type: bins
          bins_count: 5
          better: higher
        outputs:
          score_col: chairsquat_score

      - key: ohmbp
        label: Maximum Medicine Ball Press
        value_col: ohmbp
        aggregates: [avg, p80, best]
        scoring:
          type: bins
          bins_count: 5
          better: higher
        outputs:
          score_col: ohmbp_score

      - key: sbj
        label: Standing Broad Jump
        value_col: sbj
        aggregates: [avg, p80, best]
        scoring:
          type: bins
          bins_count: 5
          better: higher
        outputs:
          score_col: sbj_score

      - key: smbt
        label: Seated Medicine Ball Throw
        value_col: smbt
        aggregates: [avg, p80, best]
        scoring:
          type: bins
          bins_count: 5
          better: higher
        outputs:
          score_col: smbt_score

      - key: runspeed
        label: 20m Sprint Speed
        value_col: runspeed
        aggregates: [avg, p80, best]
        scoring:
          type: bins
          bins_count: 5
          better: lower
        outputs:
          score_col: runspeed_score

      - key: proagility
        label: Pro-Agility (5-0-5)
        value_col: proagility
        aggregates: [avg, p80, best]
        scoring:
          type: bins
          bins_count: 5
          better: lower
        outputs:
          score_col: proagility_score

      - key: slr
        label: Active Straight Leg Raise (FMS)
        value_col: slr
        aggregates: [avg, best, pct_eq_3]
        scoring:
          type: ordinal_map
          map: {1: 1, 2: 3, 3: 5}
        outputs:
          score_col: slr_score

      - key: shouldermob
        label: Shoulder Mobility (FMS)
        value_col: shouldermob
        aggregates: [avg, best, pct_eq_3]
        scoring:
          type: ordinal_map
          map: {1: 1, 2: 3, 3: 5}
        outputs:
          score_col: shouldermob_score

      - key: baleyesopen
        label: Balance â€“ Eyes Open
        value_col: baleyesopen
        aggregates: [avg, p80, best]
        scoring:
          type: fixed_bins
          bins:
            - {max: 6,  score: 1}
            - {max: 12, score: 2}
            - {max: 18, score: 3}
            - {max: 24, score: 4}
            - {max: 30, score: 5}
        outputs:
          score_col: baleyesopen_score


  level1:
    # Level 1 = attributes computed from Level 0 score columns
    composites:
      - key: strength
        from: [chairsquat_score, ohmbp_score]
        agg: mean
        output_col: layer1_strength

      - key: power
        from: [sbj_score, smbt_score]
        agg: mean
        output_col: layer1_power

      - key: speed_agility
        from: [runspeed_score, proagility_score]
        agg: mean
        output_col: layer1_speed_agility

      - key: flexibility
        from: [slr_score, shouldermob_score]
        agg: mean
        output_col: layer1_flexibility

      - key: balance
        from: [baleyesopen_score]
        agg: mean
        output_col: layer1_balance


  level2:
    # Level 2 = capabilities computed from Level 1 composites
    composites:
      - key: foundation
        from: [layer1_strength, layer1_flexibility, layer1_balance]
        agg: mean
        output_col: layer2_foundation

      - key: movement_skills
        from: [layer1_power, layer1_speed_agility]
        agg: mean
        output_col: layer2_movement_skills
